#!/usr/bin/env bash

WORKSPACE_NAMES=(
    ["1"]="WEB"
    ["2"]="TERMINAL"
    ["3"]="FILES"
    ["4"]="CHAT"
)

if [[ $1 == "navigate" ]]; then
    # Navitage to another workspace

    FOCUSED_WORKSPACE_NAME=$(swaymsg -t get_workspaces | jq '.[] | select(.focused == true).name')
    FOCUSED_WORKSPACE_NUM=$(echo "${FOCUSED_WORKSPACE_NAME}" | awk '{print $1}' | cut -d _ -f 2)

    FOCUSED_OUTPUT_NUM=$(swaymsg -t get_outputs | jq '.[] | select(.focused==true).id')

    # Find the next workspace number
    if [[ $2 == "next" ]]; then
        TARGET_WORKSPACE_NUM=$(expr ${FOCUSED_WORKSPACE_NUM} + 1)
    elif [[ $2 == "previous" ]]; then
        TARGET_WORKSPACE_NUM=$(expr ${FOCUSED_WORKSPACE_NUM} - 1)
    else
        TARGET_WORKSPACE_NUM=$2
    fi

    if [[ ${TARGET_WORKSPACE_NUM} -gt 4 ]]; then
        TARGET_WORKSPACE_NUM="1"
    elif [[ ${TARGET_WORKSPACE_NUM} -lt 1 ]]; then
        TARGET_WORKSPACE_NUM="4"
    fi

    TARGET_WORKSPACE_NAME=${WORKSPACE_NAMES[TARGET_WORKSPACE_NUM]}

    swaymsg "workspace ${FOCUSED_OUTPUT_NUM}_${TARGET_WORKSPACE_NUM} ${TARGET_WORKSPACE_NAME}"

elif [[ $1 == "move" ]]; then
    # Move the focused container to another workspace

    FOCUSED_OUTPUT_NUM=$(swaymsg -t get_outputs | jq '.[] | select(.focused==true).id')
    TARGET_WORKSPACE_NUM=$2
    TARGET_WORKSPACE_NAME=${WORKSPACE_NAMES[$2]}

    swaymsg  "move container to workspace ${FOCUSED_OUTPUT_NUM}_${TARGET_WORKSPACE_NUM} ${TARGET_WORKSPACE_NAME}"

fi
